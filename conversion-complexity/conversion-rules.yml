# SQL Conversion Complexity Rules
# Source DB → Target DB 변환 난이도를 측정하기 위한 룰 정의
#
# 핵심 원칙:
#   1. applicable_db 명시: 각 패턴이 적용되는 Source DB를 명확히 지정
#   2. 동등 기능 그룹화: 같은 기능을 수행하지만 DBMS마다 다른 문법을 사용하는 항목들을 그룹으로 관리
#   3. 변환 매트릭스 제공: Source DB → Target DB 변환 가이드 포함
#   4. 오탐 방지: Source DB에 해당하지 않는 패턴은 검출하지 않음

metadata:
  version: "1.0.0"
  description: "SQL 변환 복잡도 분석 룰"
  supported_db: ["ORA", "MY", "MDB", "PG", "SS", "ALT", "DB2"]

# 자동변환 등급 정의
conversion_grades:
  A:
    name: "자동"
    description: "단순 치환으로 자동 변환 가능"
    coefficient: 0.5
  P:
    name: "부분"
    description: "부분 자동 변환 (검증 필요)"
    coefficient: 1.0
  M:
    name: "수동"
    description: "수동 변환 필요"
    coefficient: 1.5

# 복잡도 등급
complexity_levels:
  - level: "매우 낮음"
    min_score: 0
    max_score: 2
    description: "거의 자동 변환 가능"
  - level: "낮음"
    min_score: 2
    max_score: 4
    description: "약간의 수정 필요"
  - level: "중간"
    min_score: 4
    max_score: 6
    description: "상당한 검토 필요"
  - level: "높음"
    min_score: 6
    max_score: 8
    description: "많은 수동 작업 필요"
  - level: "매우 높음"
    min_score: 8
    max_score: 10
    description: "대부분 재작성 필요"


# ============================================================
# # 1. DML Syntax
# ============================================================

rules:

  dml_syntax:
    # 1.1 기본 DML
    basic_dml:
      - id: dml_simple_select_low
        name: "단순 SELECT (조건 3개 이하)"
        weight: 5
        detection_method: ast
        logic: "where_condition_count <= 3"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: dml_simple_select_high
        name: "단순 SELECT (조건 4개 이상)"
        weight: 10
        detection_method: ast
        logic: "where_condition_count >= 4"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: dml_truncate
        name: "TRUNCATE TABLE"
        weight: 5
        detection_method: regex
        pattern: "TRUNCATE\\s+TABLE"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: dml_insert_select
        name: "INSERT INTO ... SELECT"
        weight: 5
        detection_method: regex
        pattern: "INSERT\\s+INTO\\s+\\w+.*SELECT"
        applicable_db: ["ALL"]
        conversion_grade: A

    # 1.2 다중 테이블 DML (그룹: multi_table_dml)
    multi_table_dml:
      - id: dml_multi_delete_mysql
        name: "다중 테이블 DELETE"
        weight: 15
        detection_method: regex
        pattern: "DELETE\\s+\\w+\\s*,\\s*\\w+\\s+FROM"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: multi_table_dml

      - id: dml_multi_delete_using
        name: "DELETE ... USING"
        weight: 15
        detection_method: regex
        pattern: "DELETE\\s+FROM\\s+\\w+\\s+USING"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P
        group: multi_table_dml

      - id: dml_multi_update
        name: "다중 테이블 UPDATE"
        weight: 15
        detection_method: regex
        pattern: "UPDATE\\s+\\w+\\s*,\\s*\\w+\\s+SET"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: multi_table_dml

    # 1.3 UPSERT 구문 (그룹: upsert_syntax)
    upsert_syntax:
      - id: dml_insert_ignore
        name: "INSERT IGNORE"
        weight: 10
        detection_method: regex
        pattern: "INSERT\\s+IGNORE\\s+INTO"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: upsert_syntax

      - id: dml_replace_into
        name: "REPLACE INTO"
        weight: 10
        detection_method: regex
        pattern: "REPLACE\\s+INTO"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: upsert_syntax

      - id: dml_merge_into_oracle
        name: "MERGE INTO (Oracle)"
        weight: 15
        detection_method: regex
        pattern: "MERGE\\s+INTO"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: upsert_syntax

      - id: dml_merge_sqlserver
        name: "MERGE (SQL Server)"
        weight: 15
        detection_method: regex
        pattern: "MERGE\\s+\\w+\\s+(AS\\s+)?\\w+\\s+USING"
        applicable_db: ["SS"]
        conversion_grade: P
        group: upsert_syntax

      - id: dml_on_duplicate
        name: "ON DUPLICATE KEY UPDATE"
        weight: 10
        detection_method: regex
        pattern: "ON\\s+DUPLICATE\\s+KEY\\s+UPDATE"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: upsert_syntax

      - id: dml_on_conflict
        name: "INSERT ... ON CONFLICT"
        weight: 10
        detection_method: regex
        pattern: "ON\\s+CONFLICT\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: P
        group: upsert_syntax

      - id: dml_upsert_altibase
        name: "UPSERT"
        weight: 10
        detection_method: keyword
        pattern: "UPSERT"
        applicable_db: ["ALT"]
        conversion_grade: P
        group: upsert_syntax

    # 1.4 RETURNING 절 (그룹: returning_clause)
    returning_clause:
      - id: dml_returning_pg
        name: "RETURNING (PostgreSQL)"
        weight: 15
        detection_method: regex
        pattern: "(INSERT|UPDATE|DELETE).*RETURNING"
        applicable_db: ["PG"]
        conversion_grade: M
        group: returning_clause

      - id: dml_returning_oracle
        name: "RETURNING INTO (Oracle)"
        weight: 15
        detection_method: regex
        pattern: "RETURNING.*INTO"
        applicable_db: ["ORA"]
        conversion_grade: M
        group: returning_clause

      - id: dml_output_sqlserver
        name: "OUTPUT (SQL Server)"
        weight: 15
        detection_method: regex
        pattern: "OUTPUT\\s+(INSERTED|DELETED)\\."
        applicable_db: ["SS"]
        conversion_grade: M
        group: returning_clause

    # 1.5 벌크 작업
    bulk_operations:
      - id: dml_bulk_insert
        name: "BULK INSERT"
        weight: 15
        detection_method: regex
        pattern: "BULK\\s+INSERT"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: dml_copy
        name: "COPY"
        weight: 15
        detection_method: regex
        pattern: "COPY\\s+\\w+\\s+(FROM|TO)"
        applicable_db: ["PG"]
        conversion_grade: M

      - id: dml_load_data
        name: "LOAD DATA"
        weight: 15
        detection_method: regex
        pattern: "LOAD\\s+DATA\\s+(LOCAL\\s+)?INFILE"
        applicable_db: ["MY", "MDB"]
        conversion_grade: M

      - id: dml_sqlldr
        name: "SQL*Loader 참조"
        weight: 15
        detection_method: regex
        pattern: "@\\w+\\.ctl"
        applicable_db: ["ORA"]
        conversion_grade: M

    # 1.6 SELECT INTO
    select_into:
      - id: dml_select_into_table
        name: "SELECT INTO (테이블 생성)"
        weight: 10
        detection_method: regex
        pattern: "SELECT.*INTO\\s+\\w+\\s+FROM"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: dml_select_into_var
        name: "SELECT INTO (변수 할당)"
        weight: 10
        detection_method: regex
        pattern: "SELECT.*INTO\\s+@\\w+"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: dml_select_into_plsql
        name: "SELECT INTO (PL/SQL)"
        weight: 10
        detection_method: regex
        pattern: "SELECT.*INTO\\s+\\w+\\s*;"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P


  # ============================================================
  # # 2. DDL Syntax
  # ============================================================

  ddl_syntax:
    # 2.1 테이블/뷰 관리
    table_view:
      - id: ddl_create_table
        name: "CREATE TABLE"
        weight: 5
        detection_method: regex
        pattern: "CREATE\\s+TABLE"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: ddl_create_table_as
        name: "CREATE TABLE AS SELECT"
        weight: 10
        detection_method: regex
        pattern: "CREATE\\s+TABLE\\s+\\w+\\s+AS\\s+SELECT"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: ddl_alter_table
        name: "ALTER TABLE"
        weight: 10
        detection_method: regex
        pattern: "ALTER\\s+TABLE"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: ddl_drop_table
        name: "DROP TABLE"
        weight: 5
        detection_method: regex
        pattern: "DROP\\s+TABLE"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: ddl_drop_if_exists
        name: "DROP IF EXISTS"
        weight: 5
        detection_method: regex
        pattern: "DROP\\s+(TABLE|VIEW|INDEX)\\s+IF\\s+EXISTS"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: ddl_create_view
        name: "CREATE VIEW"
        weight: 10
        detection_method: regex
        pattern: "CREATE\\s+(OR\\s+REPLACE\\s+)?VIEW"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: ddl_create_index
        name: "CREATE INDEX"
        weight: 5
        detection_method: regex
        pattern: "CREATE\\s+(UNIQUE\\s+)?INDEX"
        applicable_db: ["ALL"]
        conversion_grade: A

    # 2.2 파티션 관리
    partition:
      - id: ddl_partition_by
        name: "PARTITION BY"
        weight: 15
        detection_method: regex
        pattern: "PARTITION\\s+BY\\s+(RANGE|LIST|HASH)"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: ddl_add_partition
        name: "ADD PARTITION"
        weight: 15
        detection_method: regex
        pattern: "ADD\\s+PARTITION"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: ddl_drop_partition
        name: "DROP PARTITION"
        weight: 15
        detection_method: regex
        pattern: "DROP\\s+PARTITION"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: ddl_partition_oracle
        name: "Oracle 파티션 구문"
        weight: 15
        detection_method: regex
        pattern: "PARTITION\\s+\\w+\\s+VALUES\\s+LESS\\s+THAN"
        applicable_db: ["ORA"]
        conversion_grade: P

    # 2.3 프로시저/함수/트리거
    procedural:
      - id: ddl_create_procedure
        name: "CREATE PROCEDURE"
        weight: 20
        detection_method: regex
        pattern: "CREATE\\s+(OR\\s+REPLACE\\s+)?PROCEDURE"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: ddl_create_function
        name: "CREATE FUNCTION"
        weight: 20
        detection_method: regex
        pattern: "CREATE\\s+(OR\\s+REPLACE\\s+)?FUNCTION"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: ddl_create_trigger
        name: "CREATE TRIGGER"
        weight: 20
        detection_method: regex
        pattern: "CREATE\\s+(OR\\s+REPLACE\\s+)?TRIGGER"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: ddl_create_package
        name: "CREATE PACKAGE"
        weight: 25
        detection_method: regex
        pattern: "CREATE\\s+(OR\\s+REPLACE\\s+)?PACKAGE"
        applicable_db: ["ORA"]
        conversion_grade: M

    # 2.4 시퀀스 (그룹: sequence_syntax)
    sequence_syntax:
      - id: ddl_create_sequence
        name: "CREATE SEQUENCE"
        weight: 15
        detection_method: regex
        pattern: "CREATE\\s+SEQUENCE"
        applicable_db: ["ORA", "PG", "SS", "ALT"]
        conversion_grade: P
        group: sequence_syntax

      - id: ddl_nextval_oracle
        name: "NEXTVAL (Oracle)"
        weight: 15
        detection_method: regex
        pattern: "\\w+\\.NEXTVAL"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: sequence_syntax

      - id: ddl_nextval_pg
        name: "nextval() (PostgreSQL)"
        weight: 15
        detection_method: regex
        pattern: "nextval\\s*\\(\\s*'"
        applicable_db: ["PG"]
        conversion_grade: P
        group: sequence_syntax

      - id: ddl_next_value_ss
        name: "NEXT VALUE FOR (SQL Server)"
        weight: 15
        detection_method: regex
        pattern: "NEXT\\s+VALUE\\s+FOR"
        applicable_db: ["SS"]
        conversion_grade: P
        group: sequence_syntax

    # 2.5 세션/시스템 설정
    session_settings:
      - id: ddl_alter_session
        name: "ALTER SESSION SET"
        weight: 10
        detection_method: regex
        pattern: "ALTER\\s+SESSION\\s+SET"
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: ddl_set_session
        name: "SET (세션 변수)"
        weight: 10
        detection_method: regex
        pattern: "SET\\s+(SESSION\\s+)?\\w+\\s*="
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: ddl_set_sqlserver
        name: "SET (SQL Server)"
        weight: 10
        detection_method: regex
        pattern: "SET\\s+(NOCOUNT|ANSI_NULLS|QUOTED_IDENTIFIER)"
        applicable_db: ["SS"]
        conversion_grade: P

    # 2.6 메타데이터 조회
    metadata:
      - id: ddl_info_schema
        name: "information_schema"
        weight: 15
        detection_method: regex
        pattern: "FROM\\s+information_schema\\."
        applicable_db: ["MY", "MDB", "PG", "SS"]
        conversion_grade: P

      - id: ddl_user_tables_oracle
        name: "USER_TABLES/ALL_TABLES"
        weight: 15
        detection_method: regex
        pattern: "FROM\\s+(USER|ALL|DBA)_(TABLES|COLUMNS|INDEXES)"
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: ddl_sys_tables_ss
        name: "sys.tables (SQL Server)"
        weight: 15
        detection_method: regex
        pattern: "FROM\\s+sys\\.(tables|columns|indexes)"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: ddl_system_table_alt
        name: "SYSTEM_.* (Altibase)"
        weight: 15
        detection_method: regex
        pattern: "FROM\\s+SYSTEM_\\w+"
        applicable_db: ["ALT"]
        conversion_grade: P

    # 2.7 기타 DDL
    other_ddl:
      - id: ddl_explain
        name: "EXPLAIN"
        weight: 5
        detection_method: regex
        pattern: "EXPLAIN\\s+(ANALYZE\\s+)?"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: ddl_explain_plan
        name: "EXPLAIN PLAN FOR"
        weight: 5
        detection_method: regex
        pattern: "EXPLAIN\\s+PLAN\\s+FOR"
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: ddl_comment_on
        name: "COMMENT ON"
        weight: 5
        detection_method: regex
        pattern: "COMMENT\\s+ON\\s+(TABLE|COLUMN)"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P


  # ============================================================
  # # 3. 페이징/정렬 (그룹: pagination_syntax)
  # ============================================================

  pagination_syntax:
    # 3.1 페이징 구문
    paging:
      - id: page_limit_offset
        name: "LIMIT OFFSET"
        weight: 5
        detection_method: regex
        pattern: "LIMIT\\s+\\d+(\\s+OFFSET\\s+\\d+)?"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P
        group: pagination_syntax

      - id: page_offset_fetch
        name: "OFFSET FETCH"
        weight: 5
        detection_method: regex
        pattern: "OFFSET\\s+\\d+\\s+ROWS\\s+FETCH\\s+(FIRST|NEXT)"
        applicable_db: ["SS", "ORA"]
        conversion_grade: P
        group: pagination_syntax

      - id: page_fetch_first
        name: "FETCH FIRST N ROWS"
        weight: 10
        detection_method: regex
        pattern: "FETCH\\s+(FIRST|NEXT)\\s+\\d+\\s+ROWS\\s+ONLY"
        applicable_db: ["ORA", "DB2"]
        conversion_grade: P
        group: pagination_syntax

      - id: page_rownum
        name: "ROWNUM"
        weight: 15
        detection_method: regex
        pattern: "ROWNUM\\s*(<|<=|=|>|>=)"
        applicable_db: ["ORA"]
        conversion_grade: M
        group: pagination_syntax

      - id: page_rownum_where
        name: "WHERE ROWNUM"
        weight: 15
        detection_method: regex
        pattern: "WHERE\\s+ROWNUM"
        applicable_db: ["ORA"]
        conversion_grade: M
        group: pagination_syntax

      - id: page_rowid
        name: "ROWID"
        weight: 15
        detection_method: keyword
        pattern: "ROWID"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: page_top_n
        name: "TOP N"
        weight: 10
        detection_method: regex
        pattern: "SELECT\\s+TOP\\s+\\d+"
        applicable_db: ["SS"]
        conversion_grade: P
        group: pagination_syntax

      - id: page_top_percent
        name: "TOP PERCENT"
        weight: 10
        detection_method: regex
        pattern: "SELECT\\s+TOP\\s+\\d+\\s+PERCENT"
        applicable_db: ["SS"]
        conversion_grade: P

    # 3.2 정렬 옵션
    sorting:
      - id: sort_nulls_first
        name: "NULLS FIRST"
        weight: 10
        detection_method: regex
        pattern: "ORDER\\s+BY.*NULLS\\s+FIRST"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P

      - id: sort_nulls_last
        name: "NULLS LAST"
        weight: 10
        detection_method: regex
        pattern: "ORDER\\s+BY.*NULLS\\s+LAST"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P

  # ============================================================
  # # 4. 고급 쿼리 구문
  # ============================================================

  advanced_query:
    # 4.1 CTE (Common Table Expression)
    cte:
      - id: adv_cte
        name: "WITH 절 (CTE)"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s+\\w+\\s+AS\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: adv_cte_recursive
        name: "WITH RECURSIVE"
        weight: 15
        detection_method: regex
        pattern: "WITH\\s+RECURSIVE"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: adv_cte_recursive_ora
        name: "재귀 CTE (Oracle)"
        weight: 15
        detection_method: regex
        pattern: "WITH\\s+\\w+.*CONNECT\\s+BY"
        applicable_db: ["ORA"]
        conversion_grade: P

    # 4.2 계층적 쿼리 (Oracle 전용)
    hierarchical:
      - id: adv_connect_by
        name: "CONNECT BY"
        weight: 25
        detection_method: regex
        pattern: "CONNECT\\s+BY(\\s+NOCYCLE)?"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: adv_start_with
        name: "START WITH"
        weight: 20
        detection_method: regex
        pattern: "START\\s+WITH"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: adv_prior
        name: "PRIOR"
        weight: 15
        detection_method: keyword
        pattern: "PRIOR\\s+\\w+"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: adv_sys_connect_path
        name: "SYS_CONNECT_BY_PATH"
        weight: 20
        detection_method: regex
        pattern: "SYS_CONNECT_BY_PATH\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: adv_connect_by_root
        name: "CONNECT_BY_ROOT"
        weight: 20
        detection_method: regex
        pattern: "CONNECT_BY_ROOT\\s+\\w+"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: adv_level
        name: "LEVEL (계층)"
        weight: 15
        detection_method: keyword
        pattern: "LEVEL"
        applicable_db: ["ORA"]
        conversion_grade: M
        note: "CONNECT BY 컨텍스트"

    # 4.3 PIVOT/UNPIVOT
    pivot:
      - id: adv_pivot
        name: "PIVOT"
        weight: 15
        detection_method: regex
        pattern: "PIVOT\\s*\\("
        applicable_db: ["ORA", "SS"]
        conversion_grade: M

      - id: adv_unpivot
        name: "UNPIVOT"
        weight: 15
        detection_method: regex
        pattern: "UNPIVOT\\s*\\("
        applicable_db: ["ORA", "SS"]
        conversion_grade: M

    # 4.4 Oracle 조인 문법
    oracle_join:
      - id: adv_plus_join
        name: "(+) 조인"
        weight: 10
        detection_method: regex
        pattern: "\\w+\\s*\\(\\+\\)"
        applicable_db: ["ORA"]
        conversion_grade: P

    # 4.5 기타 고급 구문
    other_advanced:
      - id: adv_dual
        name: "DUAL 테이블"
        weight: 3
        detection_method: regex
        pattern: "FROM\\s+DUAL"
        applicable_db: ["ORA"]
        conversion_grade: A

      - id: adv_model
        name: "MODEL 절"
        weight: 25
        detection_method: regex
        pattern: "MODEL\\s+(RETURN|DIMENSION|MEASURES)"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: adv_flashback
        name: "FLASHBACK"
        weight: 20
        detection_method: regex
        pattern: "AS\\s+OF\\s+(TIMESTAMP|SCN)"
        applicable_db: ["ORA"]
        conversion_grade: M


  # ============================================================
  # # 5. 함수 - 문자열
  # ============================================================

  string_functions:
    # 5.1 공통 문자열 함수
    common:
      - id: str_concat_func
        name: "CONCAT()"
        weight: 5
        detection_method: regex
        pattern: "CONCAT\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_replace
        name: "REPLACE()"
        weight: 5
        detection_method: regex
        pattern: "REPLACE\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_trim
        name: "TRIM()"
        weight: 5
        detection_method: regex
        pattern: "TRIM\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_ltrim
        name: "LTRIM()"
        weight: 5
        detection_method: regex
        pattern: "LTRIM\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_rtrim
        name: "RTRIM()"
        weight: 5
        detection_method: regex
        pattern: "RTRIM\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_upper
        name: "UPPER()"
        weight: 5
        detection_method: regex
        pattern: "UPPER\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_lower
        name: "LOWER()"
        weight: 5
        detection_method: regex
        pattern: "LOWER\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_lpad
        name: "LPAD()"
        weight: 5
        detection_method: regex
        pattern: "LPAD\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_rpad
        name: "RPAD()"
        weight: 5
        detection_method: regex
        pattern: "RPAD\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_ascii
        name: "ASCII()"
        weight: 5
        detection_method: regex
        pattern: "ASCII\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

    # 5.2 SUBSTR/SUBSTRING (그룹: substring_func)
    substring_func:
      - id: str_substr
        name: "SUBSTR()"
        weight: 3
        detection_method: regex
        pattern: "SUBSTR\\s*\\("
        applicable_db: ["ORA", "MY", "MDB", "PG", "ALT"]
        conversion_grade: A
        group: substring_func

      - id: str_substring
        name: "SUBSTRING()"
        weight: 3
        detection_method: regex
        pattern: "SUBSTRING\\s*\\("
        applicable_db: ["MY", "MDB", "PG", "SS"]
        conversion_grade: A
        group: substring_func

    # 5.3 문자열 위치 찾기 (그룹: string_position_func)
    string_position_func:
      - id: str_instr
        name: "INSTR()"
        weight: 5
        detection_method: regex
        pattern: "INSTR\\s*\\("
        applicable_db: ["ORA", "MY", "MDB"]
        conversion_grade: P
        group: string_position_func

      - id: str_charindex
        name: "CHARINDEX()"
        weight: 5
        detection_method: regex
        pattern: "CHARINDEX\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P
        group: string_position_func

      - id: str_position
        name: "POSITION()"
        weight: 5
        detection_method: regex
        pattern: "POSITION\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: P
        group: string_position_func

      - id: str_locate
        name: "LOCATE()"
        weight: 5
        detection_method: regex
        pattern: "LOCATE\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: string_position_func

    # 5.4 문자열 길이 (그룹: string_length_func)
    string_length_func:
      - id: str_length
        name: "LENGTH()"
        weight: 5
        detection_method: regex
        pattern: "LENGTH\\s*\\("
        applicable_db: ["ORA", "MY", "MDB", "PG", "ALT"]
        conversion_grade: P
        group: string_length_func

      - id: str_len
        name: "LEN()"
        weight: 5
        detection_method: regex
        pattern: "LEN\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P
        group: string_length_func

      - id: str_char_length
        name: "CHAR_LENGTH()"
        weight: 5
        detection_method: regex
        pattern: "CHAR_LENGTH\\s*\\("
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P
        group: string_length_func

      - id: str_datalength
        name: "DATALENGTH()"
        weight: 5
        detection_method: regex
        pattern: "DATALENGTH\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P
        group: string_length_func

    # 5.5 LEFT/RIGHT 함수 (그룹: left_right_func)
    left_right_func:
      - id: str_left
        name: "LEFT()"
        weight: 10
        detection_method: regex
        pattern: "LEFT\\s*\\("
        applicable_db: ["MY", "MDB", "SS", "PG"]
        conversion_grade: P
        group: left_right_func

      - id: str_right
        name: "RIGHT()"
        weight: 10
        detection_method: regex
        pattern: "RIGHT\\s*\\("
        applicable_db: ["MY", "MDB", "SS", "PG"]
        conversion_grade: P
        group: left_right_func

    # 5.6 특수 문자열 함수
    special_string:
      - id: str_initcap
        name: "INITCAP()"
        weight: 10
        detection_method: regex
        pattern: "INITCAP\\s*\\("
        applicable_db: ["ORA", "PG"]
        conversion_grade: M

      - id: str_translate
        name: "TRANSLATE()"
        weight: 10
        detection_method: regex
        pattern: "TRANSLATE\\s*\\("
        applicable_db: ["ORA", "PG"]
        conversion_grade: M

      - id: str_reverse
        name: "REVERSE()"
        weight: 5
        detection_method: regex
        pattern: "REVERSE\\s*\\("
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: P

      - id: str_stuff
        name: "STUFF()"
        weight: 10
        detection_method: regex
        pattern: "STUFF\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P

      - id: str_chr_oracle
        name: "CHR()"
        weight: 5
        detection_method: regex
        pattern: "CHR\\s*\\("
        applicable_db: ["ORA", "PG"]
        conversion_grade: A

      - id: str_char_mysql
        name: "CHAR()"
        weight: 5
        detection_method: regex
        pattern: "CHAR\\s*\\(\\d+"
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: A

    # 5.7 정규식 함수
    regex_functions:
      - id: str_regexp_like
        name: "REGEXP_LIKE()"
        weight: 10
        detection_method: regex
        pattern: "REGEXP_LIKE\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: str_regexp_replace
        name: "REGEXP_REPLACE()"
        weight: 10
        detection_method: regex
        pattern: "REGEXP_REPLACE\\s*\\("
        applicable_db: ["ORA", "PG", "MY"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: str_regexp_substr
        name: "REGEXP_SUBSTR()"
        weight: 10
        detection_method: regex
        pattern: "REGEXP_SUBSTR\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: str_regexp_instr
        name: "REGEXP_INSTR()"
        weight: 10
        detection_method: regex
        pattern: "REGEXP_INSTR\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: str_regexp_mysql
        name: "REGEXP / RLIKE"
        weight: 10
        detection_method: regex
        pattern: "(REGEXP|RLIKE)\\s+"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: str_regexp_pg
        name: "~ 연산자"
        weight: 10
        detection_method: regex
        pattern: "~\\s*'"
        applicable_db: ["PG"]
        conversion_grade: P


  # ============================================================
  # # 6. 함수 - 날짜/시간
  # ============================================================

  datetime_functions:
    # 6.1 현재 날짜/시간 (그룹: current_datetime_func)
    current_datetime_func:
      - id: dt_now
        name: "NOW()"
        weight: 3
        detection_method: regex
        pattern: "NOW\\s*\\(\\s*\\)"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: A
        group: current_datetime_func

      - id: dt_sysdate
        name: "SYSDATE"
        weight: 3
        detection_method: keyword
        pattern: "SYSDATE"
        applicable_db: ["ORA"]
        conversion_grade: A
        group: current_datetime_func

      - id: dt_getdate
        name: "GETDATE()"
        weight: 3
        detection_method: regex
        pattern: "GETDATE\\s*\\(\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: A
        group: current_datetime_func

      - id: dt_current_timestamp
        name: "CURRENT_TIMESTAMP"
        weight: 5
        detection_method: keyword
        pattern: "CURRENT_TIMESTAMP"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: dt_current_date
        name: "CURRENT_DATE"
        weight: 5
        detection_method: keyword
        pattern: "CURRENT_DATE"
        applicable_db: ["ORA", "MY", "MDB", "PG", "ALT", "DB2"]
        conversion_grade: A
        note: "SS 제외"

      - id: dt_systimestamp
        name: "SYSTIMESTAMP"
        weight: 5
        detection_method: keyword
        pattern: "SYSTIMESTAMP"
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: dt_sysdatetime
        name: "SYSDATETIME()"
        weight: 5
        detection_method: regex
        pattern: "SYSDATETIME\\s*\\(\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P

    # 6.2 날짜 포맷 변환 (그룹: date_format_func)
    date_format_func:
      - id: dt_to_char
        name: "TO_CHAR()"
        weight: 10
        detection_method: regex
        pattern: "TO_CHAR\\s*\\("
        applicable_db: ["ORA", "PG"]
        conversion_grade: P
        group: date_format_func

      - id: dt_to_date
        name: "TO_DATE()"
        weight: 10
        detection_method: regex
        pattern: "TO_DATE\\s*\\("
        applicable_db: ["ORA", "PG"]
        conversion_grade: P
        group: date_format_func

      - id: dt_to_timestamp
        name: "TO_TIMESTAMP()"
        weight: 10
        detection_method: regex
        pattern: "TO_TIMESTAMP\\s*\\("
        applicable_db: ["ORA", "PG"]
        conversion_grade: P

      - id: dt_to_number
        name: "TO_NUMBER()"
        weight: 10
        detection_method: regex
        pattern: "TO_NUMBER\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: dt_date_format
        name: "DATE_FORMAT()"
        weight: 10
        detection_method: regex
        pattern: "DATE_FORMAT\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: date_format_func

      - id: dt_str_to_date
        name: "STR_TO_DATE()"
        weight: 10
        detection_method: regex
        pattern: "STR_TO_DATE\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: date_format_func

      - id: dt_format_ss
        name: "FORMAT() (날짜)"
        weight: 10
        detection_method: regex
        pattern: "FORMAT\\s*\\(\\s*\\w+\\s*,\\s*'[^']*'"
        applicable_db: ["SS"]
        conversion_grade: P
        group: date_format_func

      - id: dt_convert_ss
        name: "CONVERT() (날짜)"
        weight: 10
        detection_method: regex
        pattern: "CONVERT\\s*\\(\\s*(VARCHAR|DATETIME)"
        applicable_db: ["SS"]
        conversion_grade: P
        group: date_format_func

    # 6.3 날짜 연산 (그룹: date_arithmetic_func)
    date_arithmetic_func:
      - id: dt_add_months
        name: "ADD_MONTHS()"
        weight: 10
        detection_method: regex
        pattern: "ADD_MONTHS\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P
        group: date_arithmetic_func

      - id: dt_months_between
        name: "MONTHS_BETWEEN()"
        weight: 10
        detection_method: regex
        pattern: "MONTHS_BETWEEN\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: dt_date_add
        name: "DATE_ADD()"
        weight: 10
        detection_method: regex
        pattern: "DATE_ADD\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: date_arithmetic_func

      - id: dt_date_sub
        name: "DATE_SUB()"
        weight: 10
        detection_method: regex
        pattern: "DATE_SUB\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: date_arithmetic_func

      - id: dt_dateadd
        name: "DATEADD()"
        weight: 10
        detection_method: regex
        pattern: "DATEADD\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P
        group: date_arithmetic_func

      - id: dt_datediff
        name: "DATEDIFF()"
        weight: 10
        detection_method: regex
        pattern: "DATEDIFF\\s*\\("
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: P

      - id: dt_interval
        name: "INTERVAL 연산"
        weight: 10
        detection_method: regex
        pattern: "INTERVAL\\s+('?\\d+'\\s*)?(YEAR|MONTH|DAY|HOUR|MINUTE|SECOND)"
        applicable_db: ["ALL"]
        conversion_grade: P

    # 6.4 날짜 부분 추출 (그룹: date_part_func)
    date_part_func:
      - id: dt_extract
        name: "EXTRACT()"
        weight: 5
        detection_method: regex
        pattern: "EXTRACT\\s*\\(\\s*(YEAR|MONTH|DAY|HOUR|MINUTE|SECOND)"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: dt_year
        name: "YEAR()"
        weight: 5
        detection_method: regex
        pattern: "YEAR\\s*\\("
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: A
        group: date_part_func

      - id: dt_month
        name: "MONTH()"
        weight: 5
        detection_method: regex
        pattern: "MONTH\\s*\\("
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: A
        group: date_part_func

      - id: dt_day
        name: "DAY()"
        weight: 5
        detection_method: regex
        pattern: "DAY\\s*\\("
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: A
        group: date_part_func

      - id: dt_datepart
        name: "DATEPART()"
        weight: 10
        detection_method: regex
        pattern: "DATEPART\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P
        group: date_part_func

      - id: dt_to_days
        name: "TO_DAYS()"
        weight: 10
        detection_method: regex
        pattern: "TO_DAYS\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: dt_from_days
        name: "FROM_DAYS()"
        weight: 10
        detection_method: regex
        pattern: "FROM_DAYS\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

    # 6.5 날짜 TRUNC (그룹: date_trunc_func)
    date_trunc_func:
      - id: dt_trunc_oracle
        name: "TRUNC() (날짜)"
        weight: 10
        detection_method: regex
        pattern: "TRUNC\\s*\\(\\s*\\w+\\s*,\\s*'(YEAR|MONTH|DAY|HH|MI)'"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: date_trunc_func

      - id: dt_date_trunc
        name: "DATE_TRUNC()"
        weight: 10
        detection_method: regex
        pattern: "DATE_TRUNC\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: P
        group: date_trunc_func


  # ============================================================
  # # 7. 함수 - 수학/집계
  # ============================================================

  math_aggregate_functions:
    # 7.1 공통 집계 함수
    common_aggregate:
      - id: agg_count
        name: "COUNT()"
        weight: 5
        detection_method: regex
        pattern: "COUNT\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: agg_sum
        name: "SUM()"
        weight: 5
        detection_method: regex
        pattern: "SUM\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: agg_avg
        name: "AVG()"
        weight: 5
        detection_method: regex
        pattern: "AVG\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: agg_min
        name: "MIN()"
        weight: 5
        detection_method: regex
        pattern: "MIN\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: agg_max
        name: "MAX()"
        weight: 5
        detection_method: regex
        pattern: "MAX\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: agg_stddev
        name: "STDDEV()"
        weight: 10
        detection_method: regex
        pattern: "STDDEV\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: agg_variance
        name: "VARIANCE()"
        weight: 10
        detection_method: regex
        pattern: "VARIANCE\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

    # 7.2 공통 수학 함수
    common_math:
      - id: math_round
        name: "ROUND()"
        weight: 10
        detection_method: regex
        pattern: "ROUND\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: math_floor
        name: "FLOOR()"
        weight: 5
        detection_method: regex
        pattern: "FLOOR\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_ceil
        name: "CEIL() / CEILING()"
        weight: 5
        detection_method: regex
        pattern: "CEIL(ING)?\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_abs
        name: "ABS()"
        weight: 5
        detection_method: regex
        pattern: "ABS\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_sign
        name: "SIGN()"
        weight: 5
        detection_method: regex
        pattern: "SIGN\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_power
        name: "POWER()"
        weight: 5
        detection_method: regex
        pattern: "POWER\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_sqrt
        name: "SQRT()"
        weight: 5
        detection_method: regex
        pattern: "SQRT\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_exp
        name: "EXP()"
        weight: 5
        detection_method: regex
        pattern: "EXP\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_ln
        name: "LN()"
        weight: 5
        detection_method: regex
        pattern: "LN\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: math_log
        name: "LOG()"
        weight: 5
        detection_method: regex
        pattern: "LOG\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: P

    # 7.3 나머지 연산 (그룹: modulo_operation)
    modulo_operation:
      - id: math_mod_func
        name: "MOD() 함수"
        weight: 5
        detection_method: regex
        pattern: "MOD\\s*\\("
        applicable_db: ["ORA", "MY", "MDB", "PG", "ALT", "DB2"]
        conversion_grade: A
        group: modulo_operation

      - id: math_mod_operator
        name: "% 연산자"
        weight: 5
        detection_method: regex
        pattern: "\\w+\\s*%\\s*\\d+"
        applicable_db: ["MY", "MDB", "PG", "SS"]
        conversion_grade: A
        group: modulo_operation

    # 7.4 TRUNCATE (숫자) (그룹: numeric_truncate_func)
    numeric_truncate_func:
      - id: math_truncate_mysql
        name: "TRUNCATE() (숫자)"
        weight: 10
        detection_method: regex
        pattern: "TRUNCATE\\s*\\(\\s*\\w+\\s*,\\s*\\d+\\s*\\)"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: numeric_truncate_func

      - id: math_trunc_oracle
        name: "TRUNC() (숫자)"
        weight: 10
        detection_method: regex
        pattern: "TRUNC\\s*\\(\\s*\\w+\\s*,\\s*-?\\d+\\s*\\)"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P
        group: numeric_truncate_func

    # 7.5 문자열 집계 (그룹: string_aggregation_func)
    string_aggregation_func:
      - id: agg_group_concat
        name: "GROUP_CONCAT()"
        weight: 10
        detection_method: regex
        pattern: "GROUP_CONCAT\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: string_aggregation_func

      - id: agg_listagg
        name: "LISTAGG()"
        weight: 15
        detection_method: regex
        pattern: "LISTAGG\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P
        group: string_aggregation_func

      - id: agg_string_agg
        name: "STRING_AGG()"
        weight: 10
        detection_method: regex
        pattern: "STRING_AGG\\s*\\("
        applicable_db: ["PG", "SS"]
        conversion_grade: P
        group: string_aggregation_func
        note: "SS 2017+"

      - id: agg_wm_concat
        name: "WM_CONCAT()"
        weight: 15
        detection_method: regex
        pattern: "WM_CONCAT\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: M
        note: "비표준"

      - id: agg_xmlagg
        name: "XMLAGG()"
        weight: 15
        detection_method: regex
        pattern: "XMLAGG\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: M



  # ============================================================
  # # 8. 함수 - 변환/NULL처리
  # ============================================================

  conversion_null_functions:
    # 8.1 NULL 대체 함수 (그룹: null_replace_func)
    null_replace_func:
      - id: null_nvl
        name: "NVL()"
        weight: 5
        detection_method: regex
        pattern: "NVL\\s*\\("
        applicable_db: ["ORA", "ALT"]
        conversion_grade: A
        group: null_replace_func

      - id: null_nvl2
        name: "NVL2()"
        weight: 10
        detection_method: regex
        pattern: "NVL2\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P
        group: null_replace_func

      - id: null_ifnull
        name: "IFNULL()"
        weight: 5
        detection_method: regex
        pattern: "IFNULL\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: A
        group: null_replace_func

      - id: null_isnull
        name: "ISNULL()"
        weight: 5
        detection_method: regex
        pattern: "ISNULL\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: A
        group: null_replace_func

      - id: null_coalesce
        name: "COALESCE()"
        weight: 3
        detection_method: regex
        pattern: "COALESCE\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: null_nullif
        name: "NULLIF()"
        weight: 5
        detection_method: regex
        pattern: "NULLIF\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

    # 8.2 조건 분기 (그룹: conditional_func)
    conditional_func:
      - id: cond_decode
        name: "DECODE()"
        weight: 15
        detection_method: regex
        pattern: "DECODE\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: M
        group: conditional_func

      - id: cond_if_mysql
        name: "IF()"
        weight: 10
        detection_method: regex
        pattern: "IF\\s*\\(\\s*\\w+"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: conditional_func

      - id: cond_iif
        name: "IIF()"
        weight: 10
        detection_method: regex
        pattern: "IIF\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P
        group: conditional_func

      - id: cond_case
        name: "CASE WHEN"
        weight: 3
        detection_method: regex
        pattern: "CASE\\s+WHEN"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: cond_case_simple
        name: "CASE expr WHEN"
        weight: 3
        detection_method: regex
        pattern: "CASE\\s+\\w+\\s+WHEN"
        applicable_db: ["ALL"]
        conversion_grade: A

    # 8.3 GREATEST/LEAST
    greatest_least:
      - id: cond_greatest
        name: "GREATEST()"
        weight: 10
        detection_method: regex
        pattern: "GREATEST\\s*\\("
        applicable_db: ["ORA", "MY", "MDB", "PG"]
        conversion_grade: P

      - id: cond_least
        name: "LEAST()"
        weight: 10
        detection_method: regex
        pattern: "LEAST\\s*\\("
        applicable_db: ["ORA", "MY", "MDB", "PG"]
        conversion_grade: P

    # 8.4 타입 캐스팅 (그룹: type_casting)
    type_casting:
      - id: cast_cast
        name: "CAST()"
        weight: 10
        detection_method: regex
        pattern: "CAST\\s*\\(\\s*\\w+\\s+AS\\s+"
        applicable_db: ["ALL"]
        conversion_grade: P
        group: type_casting

      - id: cast_convert_ss
        name: "CONVERT() (SQL Server)"
        weight: 10
        detection_method: regex
        pattern: "CONVERT\\s*\\(\\s*\\w+\\s*,\\s*\\w+"
        applicable_db: ["SS"]
        conversion_grade: P
        group: type_casting

      - id: cast_pg_operator
        name: ":: 연산자"
        weight: 10
        detection_method: regex
        pattern: "\\w+::\\w+"
        applicable_db: ["PG"]
        conversion_grade: P
        group: type_casting


  # ============================================================
  # # 9. 함수 - 윈도우/분석
  # ============================================================

  window_functions:
    # 9.1 순위 함수
    ranking:
      - id: win_row_number
        name: "ROW_NUMBER()"
        weight: 10
        detection_method: regex
        pattern: "ROW_NUMBER\\s*\\(\\s*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_rank
        name: "RANK()"
        weight: 10
        detection_method: regex
        pattern: "RANK\\s*\\(\\s*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_dense_rank
        name: "DENSE_RANK()"
        weight: 10
        detection_method: regex
        pattern: "DENSE_RANK\\s*\\(\\s*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_ntile
        name: "NTILE()"
        weight: 10
        detection_method: regex
        pattern: "NTILE\\s*\\(\\d+\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_percent_rank
        name: "PERCENT_RANK()"
        weight: 10
        detection_method: regex
        pattern: "PERCENT_RANK\\s*\\(\\s*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_cume_dist
        name: "CUME_DIST()"
        weight: 10
        detection_method: regex
        pattern: "CUME_DIST\\s*\\(\\s*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

    # 9.2 오프셋 함수
    offset:
      - id: win_lag
        name: "LAG()"
        weight: 10
        detection_method: regex
        pattern: "LAG\\s*\\(.*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_lead
        name: "LEAD()"
        weight: 10
        detection_method: regex
        pattern: "LEAD\\s*\\(.*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_first_value
        name: "FIRST_VALUE()"
        weight: 10
        detection_method: regex
        pattern: "FIRST_VALUE\\s*\\(.*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_last_value
        name: "LAST_VALUE()"
        weight: 10
        detection_method: regex
        pattern: "LAST_VALUE\\s*\\(.*\\)\\s*OVER"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_nth_value
        name: "NTH_VALUE()"
        weight: 10
        detection_method: regex
        pattern: "NTH_VALUE\\s*\\(.*\\)\\s*OVER"
        applicable_db: ["ORA", "PG", "MY"]
        conversion_grade: P
        note: "MY 8.0+"

    # 9.3 OVER 절
    over_clause:
      - id: win_over_partition
        name: "OVER (PARTITION BY)"
        weight: 10
        detection_method: regex
        pattern: "OVER\\s*\\(\\s*PARTITION\\s+BY"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_over_order
        name: "OVER (ORDER BY)"
        weight: 10
        detection_method: regex
        pattern: "OVER\\s*\\(\\s*ORDER\\s+BY"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_rows_between
        name: "ROWS BETWEEN"
        weight: 15
        detection_method: regex
        pattern: "ROWS\\s+BETWEEN"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: win_range_between
        name: "RANGE BETWEEN"
        weight: 15
        detection_method: regex
        pattern: "RANGE\\s+BETWEEN"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "MY 8.0+"

    # 9.4 Oracle 전용 분석 함수
    oracle_analytic:
      - id: win_ratio_to_report
        name: "RATIO_TO_REPORT()"
        weight: 15
        detection_method: regex
        pattern: "RATIO_TO_REPORT\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: win_keep_dense_rank
        name: "KEEP (DENSE_RANK)"
        weight: 15
        detection_method: regex
        pattern: "KEEP\\s*\\(\\s*DENSE_RANK"
        applicable_db: ["ORA"]
        conversion_grade: M


  # ============================================================
  # # 10. 함수 - JSON/배열/기타
  # ============================================================

  json_array_functions:
    # 10.1 JSON 함수 (그룹: json_functions)
    json_functions:
      - id: json_extract_mysql
        name: "JSON_EXTRACT()"
        weight: 15
        detection_method: regex
        pattern: "JSON_EXTRACT\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: json_functions

      - id: json_value
        name: "JSON_VALUE()"
        weight: 15
        detection_method: regex
        pattern: "JSON_VALUE\\s*\\("
        applicable_db: ["SS", "ORA"]
        conversion_grade: P
        group: json_functions

      - id: json_query
        name: "JSON_QUERY()"
        weight: 15
        detection_method: regex
        pattern: "JSON_QUERY\\s*\\("
        applicable_db: ["SS", "ORA"]
        conversion_grade: P
        group: json_functions

      - id: json_object
        name: "JSON_OBJECT()"
        weight: 15
        detection_method: regex
        pattern: "JSON_OBJECT\\s*\\("
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: json_array
        name: "JSON_ARRAY()"
        weight: 15
        detection_method: regex
        pattern: "JSON_ARRAY\\s*\\("
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: json_arrow_mysql
        name: "-> 연산자 (MySQL)"
        weight: 15
        detection_method: regex
        pattern: "->\\s*'"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: json_arrow_pg
        name: "-> 연산자 (PostgreSQL)"
        weight: 15
        detection_method: regex
        pattern: "->\\s*'[^']+'\\s*"
        applicable_db: ["PG"]
        conversion_grade: P

      - id: json_double_arrow
        name: "->> 연산자"
        weight: 15
        detection_method: regex
        pattern: "->>\\s*'"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: json_path_pg
        name: "#> / #>> 연산자"
        weight: 15
        detection_method: regex
        pattern: "#>>?\\s*'"
        applicable_db: ["PG"]
        conversion_grade: P

    # 10.2 배열 함수 (PostgreSQL)
    array_functions:
      - id: arr_array_literal
        name: "ARRAY[]"
        weight: 15
        detection_method: regex
        pattern: "ARRAY\\s*\\["
        applicable_db: ["PG"]
        conversion_grade: M

      - id: arr_array_agg
        name: "ARRAY_AGG()"
        weight: 15
        detection_method: regex
        pattern: "ARRAY_AGG\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: M

      - id: arr_unnest
        name: "UNNEST()"
        weight: 15
        detection_method: regex
        pattern: "UNNEST\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: M

      - id: arr_any
        name: "ANY() (배열)"
        weight: 15
        detection_method: regex
        pattern: "=\\s*ANY\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: M

      - id: arr_all
        name: "ALL() (배열)"
        weight: 15
        detection_method: regex
        pattern: "=\\s*ALL\\s*\\("
        applicable_db: ["PG"]
        conversion_grade: M

    # 10.3 비트/HEX 함수
    bit_hex:
      - id: bit_and
        name: "BIT_AND()"
        weight: 10
        detection_method: regex
        pattern: "BIT_AND\\s*\\("
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: bit_or
        name: "BIT_OR()"
        weight: 10
        detection_method: regex
        pattern: "BIT_OR\\s*\\("
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: bit_xor
        name: "BIT_XOR()"
        weight: 10
        detection_method: regex
        pattern: "BIT_XOR\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: hex_func
        name: "HEX()"
        weight: 10
        detection_method: regex
        pattern: "HEX\\s*\\("
        applicable_db: ["MY", "MDB", "ORA"]
        conversion_grade: P

      - id: unhex_func
        name: "UNHEX()"
        weight: 10
        detection_method: regex
        pattern: "UNHEX\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: rawtohex
        name: "RAWTOHEX()"
        weight: 10
        detection_method: regex
        pattern: "RAWTOHEX\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: hextoraw
        name: "HEXTORAW()"
        weight: 10
        detection_method: regex
        pattern: "HEXTORAW\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: P

    # 10.4 사용자 정의 함수
    udf:
      - id: udf_call
        name: "사용자 정의 함수 호출"
        weight: 15
        detection_method: ast
        logic: "내장 함수 목록에 없는 함수 호출"
        applicable_db: ["ALL"]
        conversion_grade: M


  # ============================================================
  # # 11. JOIN
  # ============================================================

  join_syntax:
    # 11.1 INNER JOIN
    inner:
      - id: join_inner_1
        name: "INNER JOIN 0-1개"
        weight: 5
        detection_method: ast
        logic: "(INNER\\s+)?JOIN 카운트 <= 1"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_inner_2_3
        name: "INNER JOIN 2-3개"
        weight: 10
        detection_method: ast
        logic: "(INNER\\s+)?JOIN 카운트 2-3"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_inner_4plus
        name: "INNER JOIN 4개 이상"
        weight: 15
        detection_method: ast
        logic: "(INNER\\s+)?JOIN 카운트 >= 4"
        applicable_db: ["ALL"]
        conversion_grade: A

    # 11.2 OUTER JOIN
    outer:
      - id: join_left_1
        name: "LEFT JOIN 0-1개"
        weight: 5
        detection_method: regex
        pattern: "LEFT\\s+(OUTER\\s+)?JOIN"
        logic: "카운트 <= 1"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_left_2_3
        name: "LEFT JOIN 2-3개"
        weight: 10
        detection_method: regex
        pattern: "LEFT\\s+(OUTER\\s+)?JOIN"
        logic: "카운트 2-3"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_left_4plus
        name: "LEFT JOIN 4개 이상"
        weight: 15
        detection_method: regex
        pattern: "LEFT\\s+(OUTER\\s+)?JOIN"
        logic: "카운트 >= 4"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_right_1
        name: "RIGHT JOIN 0-1개"
        weight: 5
        detection_method: regex
        pattern: "RIGHT\\s+(OUTER\\s+)?JOIN"
        logic: "카운트 <= 1"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_right_2_3
        name: "RIGHT JOIN 2-3개"
        weight: 10
        detection_method: regex
        pattern: "RIGHT\\s+(OUTER\\s+)?JOIN"
        logic: "카운트 2-3"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_right_4plus
        name: "RIGHT JOIN 4개 이상"
        weight: 15
        detection_method: regex
        pattern: "RIGHT\\s+(OUTER\\s+)?JOIN"
        logic: "카운트 >= 4"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_full_outer
        name: "FULL OUTER JOIN"
        weight: 15
        detection_method: regex
        pattern: "FULL\\s+(OUTER\\s+)?JOIN"
        applicable_db: ["ALL"]
        conversion_grade: P

    # 11.3 특수 JOIN
    special:
      - id: join_cross
        name: "CROSS JOIN"
        weight: 10
        detection_method: regex
        pattern: "CROSS\\s+JOIN"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_natural
        name: "NATURAL JOIN"
        weight: 10
        detection_method: regex
        pattern: "NATURAL\\s+(LEFT|RIGHT|INNER)?\\s*JOIN"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: join_self
        name: "SELF JOIN"
        weight: 10
        detection_method: ast
        logic: "동일 테이블 2회 이상 참조"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: join_using
        name: "USING 절"
        weight: 5
        detection_method: regex
        pattern: "JOIN\\s+\\w+\\s+USING\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A

    # 11.4 LATERAL/APPLY
    lateral_apply:
      - id: join_lateral
        name: "LATERAL"
        weight: 15
        detection_method: regex
        pattern: "(,\\s*)?LATERAL\\s+"
        applicable_db: ["PG", "MY", "ORA"]
        conversion_grade: P
        note: "MY 8.0+, ORA 12c+"

      - id: join_cross_apply
        name: "CROSS APPLY"
        weight: 15
        detection_method: regex
        pattern: "CROSS\\s+APPLY"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: join_outer_apply
        name: "OUTER APPLY"
        weight: 15
        detection_method: regex
        pattern: "OUTER\\s+APPLY"
        applicable_db: ["SS"]
        conversion_grade: P


  # ============================================================
  # # 12. 서브쿼리
  # ============================================================

  subquery:
    # 12.1 서브쿼리 유형
    types:
      - id: sub_scalar
        name: "스칼라 서브쿼리"
        weight: 10
        detection_method: ast
        logic: "SELECT 절 내 (SELECT ... )"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: sub_in
        name: "IN 서브쿼리"
        weight: 5
        detection_method: regex
        pattern: "IN\\s*\\(\\s*SELECT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: sub_not_in
        name: "NOT IN 서브쿼리"
        weight: 10
        detection_method: regex
        pattern: "NOT\\s+IN\\s*\\(\\s*SELECT"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: sub_exists
        name: "EXISTS 서브쿼리"
        weight: 5
        detection_method: regex
        pattern: "EXISTS\\s*\\(\\s*SELECT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: sub_not_exists
        name: "NOT EXISTS 서브쿼리"
        weight: 10
        detection_method: regex
        pattern: "NOT\\s+EXISTS\\s*\\(\\s*SELECT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: sub_correlated
        name: "상관 서브쿼리"
        weight: 15
        detection_method: ast
        logic: "서브쿼리 내 외부 테이블 참조"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: sub_inline_view
        name: "인라인 뷰"
        weight: 10
        detection_method: ast
        logic: "FROM 절 서브쿼리"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: sub_inline_group
        name: "인라인 뷰 + GROUP BY"
        weight: 15
        detection_method: ast
        logic: "FROM 절 서브쿼리 + GROUP BY"
        applicable_db: ["ALL"]
        conversion_grade: P

    # 12.2 서브쿼리 중첩
    nesting:
      - id: sub_depth_1
        name: "서브쿼리 중첩 1단계"
        weight: 5
        detection_method: ast
        logic: "서브쿼리 깊이 = 1"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: sub_depth_2
        name: "서브쿼리 중첩 2단계"
        weight: 10
        detection_method: ast
        logic: "서브쿼리 깊이 = 2"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: sub_depth_3plus
        name: "서브쿼리 중첩 3단계+"
        weight: 15
        detection_method: ast
        logic: "서브쿼리 깊이 >= 3"
        applicable_db: ["ALL"]
        conversion_grade: P

    # 12.3 기타 절
    clauses:
      - id: clause_having
        name: "HAVING 절"
        weight: 3
        detection_method: keyword
        pattern: "HAVING"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: clause_group_by
        name: "GROUP BY 절"
        weight: 3
        detection_method: keyword
        pattern: "GROUP\\s+BY"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: clause_order_by
        name: "ORDER BY 절"
        weight: 3
        detection_method: keyword
        pattern: "ORDER\\s+BY"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: clause_distinct
        name: "DISTINCT"
        weight: 3
        detection_method: keyword
        pattern: "SELECT\\s+DISTINCT"
        applicable_db: ["ALL"]
        conversion_grade: A


  # ============================================================
  # # 13. 집합 연산 (그룹: set_operations)
  # ============================================================

  set_operations:
    operations:
      - id: set_union_all
        name: "UNION ALL"
        weight: 5
        detection_method: regex
        pattern: "UNION\\s+ALL"
        applicable_db: ["ALL"]
        conversion_grade: A
        group: set_operations

      - id: set_union
        name: "UNION (DISTINCT)"
        weight: 5
        detection_method: regex
        pattern: "UNION(?!\\s+ALL)"
        applicable_db: ["ALL"]
        conversion_grade: A
        group: set_operations

      - id: set_except
        name: "EXCEPT"
        weight: 15
        detection_method: keyword
        pattern: "EXCEPT"
        applicable_db: ["PG", "SS", "MY"]
        conversion_grade: P
        group: set_operations
        note: "MY 8.0+"

      - id: set_minus
        name: "MINUS"
        weight: 15
        detection_method: keyword
        pattern: "MINUS"
        applicable_db: ["ORA", "ALT"]
        conversion_grade: P
        group: set_operations

      - id: set_intersect
        name: "INTERSECT"
        weight: 15
        detection_method: keyword
        pattern: "INTERSECT"
        applicable_db: ["ALL"]
        conversion_grade: P
        group: set_operations


  # ============================================================
  # # 14. 힌트 (그룹: optimizer_hints)
  # ============================================================

  optimizer_hints:
    hints:
      - id: hint_none
        name: "힌트 없음"
        weight: 0
        detection_method: none
        logic: "힌트 패턴 미검출"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: hint_oracle
        name: "Oracle 힌트"
        weight: 10
        detection_method: regex
        pattern: "/\\*\\+.*\\*/"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: hint_mysql_index
        name: "MySQL 인덱스 힌트"
        weight: 10
        detection_method: regex
        pattern: "(USE|FORCE|IGNORE)\\s+INDEX\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: hint_mysql_opt
        name: "MySQL 옵티마이저 힌트"
        weight: 10
        detection_method: regex
        pattern: "/\\*\\+\\s*(NO_)?[A-Z_]+\\s*\\(/"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        note: "MY 8.0+"

      - id: hint_ss_table
        name: "SQL Server 테이블 힌트"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s*\\(\\s*(NOLOCK|ROWLOCK|TABLOCK|INDEX)"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: hint_ss_query
        name: "SQL Server 쿼리 힌트"
        weight: 10
        detection_method: regex
        pattern: "OPTION\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: P

      - id: hint_pg
        name: "PostgreSQL pg_hint_plan"
        weight: 10
        detection_method: regex
        pattern: "/\\*\\+\\s*(SeqScan|IndexScan|NestLoop)"
        applicable_db: ["PG"]
        conversion_grade: P

      - id: hint_altibase
        name: "Altibase 힌트"
        weight: 10
        detection_method: regex
        pattern: "/\\*\\+.*\\*/"
        applicable_db: ["ALT"]
        conversion_grade: M


  # ============================================================
  # # 15. 데이터 타입 - 기본
  # ============================================================

  data_types_basic:
    # 15.1 문자열 타입
    string_types:
      - id: type_varchar
        name: "VARCHAR"
        weight: 0
        detection_method: keyword
        pattern: "VARCHAR\\s*\\(\\d+\\)"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_varchar2
        name: "VARCHAR2"
        weight: 5
        detection_method: keyword
        pattern: "VARCHAR2"
        applicable_db: ["ORA"]
        conversion_grade: A

      - id: type_char
        name: "CHAR"
        weight: 5
        detection_method: keyword
        pattern: "CHAR\\s*\\(\\d+\\)"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_nchar
        name: "NCHAR"
        weight: 5
        detection_method: keyword
        pattern: "NCHAR"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_nvarchar
        name: "NVARCHAR"
        weight: 5
        detection_method: keyword
        pattern: "NVARCHAR"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_nvarchar2
        name: "NVARCHAR2"
        weight: 5
        detection_method: keyword
        pattern: "NVARCHAR2"
        applicable_db: ["ORA"]
        conversion_grade: A

      - id: type_text
        name: "TEXT"
        weight: 5
        detection_method: keyword
        pattern: "TEXT"
        applicable_db: ["MY", "MDB", "PG", "SS"]
        conversion_grade: P

    # 15.2 숫자 타입
    numeric_types:
      - id: type_int
        name: "INT / INTEGER"
        weight: 0
        detection_method: keyword
        pattern: "INT(EGER)?"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_bigint
        name: "BIGINT"
        weight: 0
        detection_method: keyword
        pattern: "BIGINT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_smallint
        name: "SMALLINT"
        weight: 0
        detection_method: keyword
        pattern: "SMALLINT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_tinyint
        name: "TINYINT"
        weight: 5
        detection_method: keyword
        pattern: "TINYINT"
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: P

      - id: type_number
        name: "NUMBER(p,s)"
        weight: 5
        detection_method: regex
        pattern: "NUMBER\\s*\\(\\s*\\d+\\s*(,\\s*\\d+)?\\s*\\)"
        applicable_db: ["ORA"]
        conversion_grade: A

      - id: type_decimal
        name: "DECIMAL / NUMERIC"
        weight: 5
        detection_method: keyword
        pattern: "(DECIMAL|NUMERIC)\\s*\\(\\d+"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_float
        name: "FLOAT"
        weight: 5
        detection_method: keyword
        pattern: "FLOAT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: type_double
        name: "DOUBLE"
        weight: 5
        detection_method: keyword
        pattern: "DOUBLE"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: A

      - id: type_real
        name: "REAL"
        weight: 5
        detection_method: keyword
        pattern: "REAL"
        applicable_db: ["ALL"]
        conversion_grade: A

    # 15.3 특수 타입
    special_types:
      - id: type_bit
        name: "BIT"
        weight: 5
        detection_method: keyword
        pattern: "BIT"
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: P

      - id: type_boolean
        name: "BOOLEAN"
        weight: 5
        detection_method: keyword
        pattern: "BOOL(EAN)?"
        applicable_db: ["PG", "MY"]
        conversion_grade: P
        note: "MY alias"

      - id: type_enum
        name: "ENUM"
        weight: 5
        detection_method: regex
        pattern: "ENUM\\s*\\("
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: type_set
        name: "SET (타입)"
        weight: 5
        detection_method: regex
        pattern: "SET\\s*\\('[^']+"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P


  # ============================================================
  # # 16. 데이터 타입 - 날짜/시간
  # ============================================================

  data_types_datetime:
    datetime_types:
      - id: type_date
        name: "DATE"
        weight: 5
        detection_method: keyword
        pattern: "DATE"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: type_datetime
        name: "DATETIME"
        weight: 5
        detection_method: keyword
        pattern: "DATETIME"
        applicable_db: ["MY", "MDB", "SS"]
        conversion_grade: A

      - id: type_datetime2
        name: "DATETIME2"
        weight: 10
        detection_method: keyword
        pattern: "DATETIME2"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: type_timestamp
        name: "TIMESTAMP"
        weight: 5
        detection_method: keyword
        pattern: "TIMESTAMP"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: type_timestamp_tz
        name: "TIMESTAMP WITH TIME ZONE"
        weight: 15
        detection_method: regex
        pattern: "TIMESTAMP\\s+WITH\\s+TIME\\s+ZONE"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P

      - id: type_timestamp_ltz
        name: "TIMESTAMP WITH LOCAL TIME ZONE"
        weight: 15
        detection_method: regex
        pattern: "TIMESTAMP\\s+WITH\\s+LOCAL\\s+TIME\\s+ZONE"
        applicable_db: ["ORA"]
        conversion_grade: P

      - id: type_datetimeoffset
        name: "DATETIMEOFFSET"
        weight: 15
        detection_method: keyword
        pattern: "DATETIMEOFFSET"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: type_time
        name: "TIME"
        weight: 5
        detection_method: keyword
        pattern: "TIME"
        applicable_db: ["MY", "MDB", "PG", "SS"]
        conversion_grade: A

      - id: type_interval
        name: "INTERVAL (타입)"
        weight: 15
        detection_method: keyword
        pattern: "INTERVAL"
        applicable_db: ["PG", "ORA"]
        conversion_grade: M
        note: "DDL 컨텍스트"

      - id: type_rowversion
        name: "ROWVERSION"
        weight: 10
        detection_method: keyword
        pattern: "ROWVERSION"
        applicable_db: ["SS"]
        conversion_grade: P


  # ============================================================
  # # 17. 데이터 타입 - 대용량/특수
  # ============================================================

  data_types_lob_special:
    # 17.1 LOB 타입 (그룹: lob_types)
    lob_types:
      - id: type_blob
        name: "BLOB"
        weight: 10
        detection_method: keyword
        pattern: "BLOB"
        applicable_db: ["ORA", "MY", "MDB"]
        conversion_grade: P
        group: lob_types

      - id: type_clob
        name: "CLOB"
        weight: 10
        detection_method: keyword
        pattern: "CLOB"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: lob_types

      - id: type_nclob
        name: "NCLOB"
        weight: 10
        detection_method: keyword
        pattern: "NCLOB"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: lob_types

      - id: type_bytea
        name: "BYTEA"
        weight: 10
        detection_method: keyword
        pattern: "BYTEA"
        applicable_db: ["PG"]
        conversion_grade: P
        group: lob_types

      - id: type_varbinary
        name: "VARBINARY"
        weight: 10
        detection_method: keyword
        pattern: "VARBINARY"
        applicable_db: ["SS"]
        conversion_grade: P
        group: lob_types

      - id: type_image
        name: "IMAGE"
        weight: 10
        detection_method: keyword
        pattern: "IMAGE"
        applicable_db: ["SS"]
        conversion_grade: P
        note: "레거시"

      - id: type_longtext
        name: "LONGTEXT"
        weight: 10
        detection_method: keyword
        pattern: "LONGTEXT"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: lob_types

      - id: type_longblob
        name: "LONGBLOB"
        weight: 10
        detection_method: keyword
        pattern: "LONGBLOB"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: lob_types

    # 17.2 JSON/XML 타입
    json_xml_types:
      - id: type_json
        name: "JSON"
        weight: 10
        detection_method: keyword
        pattern: "JSON"
        applicable_db: ["MY", "MDB", "PG"]
        conversion_grade: P

      - id: type_jsonb
        name: "JSONB"
        weight: 10
        detection_method: keyword
        pattern: "JSONB"
        applicable_db: ["PG"]
        conversion_grade: P

      - id: type_xml
        name: "XML"
        weight: 15
        detection_method: keyword
        pattern: "XML"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: type_xmltype
        name: "XMLTYPE"
        weight: 15
        detection_method: keyword
        pattern: "XMLTYPE"
        applicable_db: ["ORA"]
        conversion_grade: M

    # 17.3 공간 타입
    spatial_types:
      - id: type_geometry
        name: "GEOMETRY"
        weight: 15
        detection_method: keyword
        pattern: "GEOMETRY"
        applicable_db: ["MY", "MDB", "PG", "SS"]
        conversion_grade: M

      - id: type_geography
        name: "GEOGRAPHY"
        weight: 15
        detection_method: keyword
        pattern: "GEOGRAPHY"
        applicable_db: ["SS", "PG"]
        conversion_grade: M

      - id: type_sdo_geometry
        name: "SDO_GEOMETRY"
        weight: 15
        detection_method: keyword
        pattern: "SDO_GEOMETRY"
        applicable_db: ["ORA"]
        conversion_grade: M

    # 17.4 기타 특수 타입
    other_special_types:
      - id: type_array
        name: "ARRAY"
        weight: 15
        detection_method: regex
        pattern: "\\w+\\s*\\[\\s*\\]"
        applicable_db: ["PG"]
        conversion_grade: M

      - id: type_hstore
        name: "HSTORE"
        weight: 15
        detection_method: keyword
        pattern: "HSTORE"
        applicable_db: ["PG"]
        conversion_grade: M


  # ============================================================
  # # 18. 데이터 타입 - 식별자/네트워크
  # ============================================================

  data_types_identifier_network:
    # 18.1 자동 증가 (그룹: auto_increment_types)
    auto_increment_types:
      - id: type_serial
        name: "SERIAL"
        weight: 10
        detection_method: keyword
        pattern: "SERIAL"
        applicable_db: ["PG"]
        conversion_grade: P
        group: auto_increment_types

      - id: type_bigserial
        name: "BIGSERIAL"
        weight: 10
        detection_method: keyword
        pattern: "BIGSERIAL"
        applicable_db: ["PG"]
        conversion_grade: P
        group: auto_increment_types

      - id: type_auto_increment
        name: "AUTO_INCREMENT"
        weight: 10
        detection_method: keyword
        pattern: "AUTO_INCREMENT"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P
        group: auto_increment_types

      - id: type_identity_ss
        name: "IDENTITY (SQL Server)"
        weight: 10
        detection_method: regex
        pattern: "IDENTITY\\s*\\(\\s*\\d+\\s*,\\s*\\d+\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P
        group: auto_increment_types

      - id: type_identity_ora
        name: "GENERATED AS IDENTITY"
        weight: 10
        detection_method: regex
        pattern: "GENERATED.*AS\\s+IDENTITY"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P
        note: "ORA 12c+"
        group: auto_increment_types

    # 18.2 UUID/GUID (그룹: uuid_types)
    uuid_types:
      - id: type_uuid
        name: "UUID"
        weight: 10
        detection_method: keyword
        pattern: "UUID"
        applicable_db: ["PG"]
        conversion_grade: P
        group: uuid_types

      - id: type_uniqueidentifier
        name: "UNIQUEIDENTIFIER"
        weight: 10
        detection_method: keyword
        pattern: "UNIQUEIDENTIFIER"
        applicable_db: ["SS"]
        conversion_grade: P
        group: uuid_types

      - id: type_raw_guid
        name: "RAW(16) (GUID)"
        weight: 10
        detection_method: regex
        pattern: "RAW\\s*\\(\\s*16\\s*\\)"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: uuid_types

    # 18.3 네트워크 타입 (PostgreSQL 전용)
    network_types:
      - id: type_inet
        name: "INET"
        weight: 10
        detection_method: keyword
        pattern: "INET"
        applicable_db: ["PG"]
        conversion_grade: M

      - id: type_cidr
        name: "CIDR"
        weight: 10
        detection_method: keyword
        pattern: "CIDR"
        applicable_db: ["PG"]
        conversion_grade: M

      - id: type_macaddr
        name: "MACADDR"
        weight: 10
        detection_method: keyword
        pattern: "MACADDR"
        applicable_db: ["PG"]
        conversion_grade: M

    # 18.4 금액 타입
    money_types:
      - id: type_money_pg
        name: "MONEY (PostgreSQL)"
        weight: 10
        detection_method: keyword
        pattern: "MONEY"
        applicable_db: ["PG"]
        conversion_grade: P

      - id: type_money_ss
        name: "MONEY (SQL Server)"
        weight: 10
        detection_method: keyword
        pattern: "MONEY"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: type_smallmoney
        name: "SMALLMONEY"
        weight: 10
        detection_method: keyword
        pattern: "SMALLMONEY"
        applicable_db: ["SS"]
        conversion_grade: P


  # ============================================================
  # # 19. 데이터 처리 특성
  # ============================================================

  data_processing:
    characteristics:
      - id: data_implicit_num_str
        name: "숫자-문자열 암시적 변환"
        weight: 5
        detection_method: ast
        logic: "숫자 컬럼과 문자열 비교"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "정적 분석 어려움"

      - id: data_implicit_date_str
        name: "날짜-문자열 암시적 변환"
        weight: 5
        detection_method: ast
        logic: "날짜 컬럼과 문자열 비교"
        applicable_db: ["ALL"]
        conversion_grade: P
        note: "정적 분석 어려움"

      - id: data_date_string_compare
        name: "날짜 문자열 비교"
        weight: 5
        detection_method: regex
        pattern: "\\w+\\s*(=|<|>)\\s*'[0-9]{4}-[0-9]{2}-[0-9]{2}'"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: data_null_sort
        name: "NULL 정렬 순서"
        weight: 10
        detection_method: regex
        pattern: "ORDER\\s+BY.*NULLS\\s+(FIRST|LAST)"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P

      - id: data_empty_string_null
        name: "빈 문자열 = NULL"
        weight: 10
        detection_method: ast
        logic: "'' 사용"
        applicable_db: ["ORA"]
        conversion_grade: M
        note: "Oracle 특유 동작"

      - id: data_null_arithmetic
        name: "NULL 연산 결과"
        weight: 5
        detection_method: ast
        logic: "NULL과의 산술 연산"
        applicable_db: ["ALL"]
        conversion_grade: P


  # ============================================================
  # # 20. 트랜잭션/락
  # ============================================================

  transaction_lock:
    # 20.1 SELECT FOR UPDATE (그룹: select_for_update)
    select_for_update:
      - id: lock_for_update
        name: "SELECT FOR UPDATE"
        weight: 10
        detection_method: regex
        pattern: "SELECT.*FOR\\s+UPDATE"
        applicable_db: ["ALL"]
        conversion_grade: P
        group: select_for_update

      - id: lock_for_update_nowait
        name: "FOR UPDATE NOWAIT"
        weight: 15
        detection_method: regex
        pattern: "FOR\\s+UPDATE\\s+NOWAIT"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P
        group: select_for_update

      - id: lock_for_update_wait
        name: "FOR UPDATE WAIT n"
        weight: 15
        detection_method: regex
        pattern: "FOR\\s+UPDATE\\s+WAIT\\s+\\d+"
        applicable_db: ["ORA"]
        conversion_grade: P
        group: select_for_update

      - id: lock_for_update_skip
        name: "FOR UPDATE SKIP LOCKED"
        weight: 15
        detection_method: regex
        pattern: "FOR\\s+UPDATE\\s+SKIP\\s+LOCKED"
        applicable_db: ["ORA", "PG", "MY"]
        conversion_grade: P
        note: "MY 8.0+"
        group: select_for_update

      - id: lock_for_share
        name: "FOR SHARE"
        weight: 10
        detection_method: regex
        pattern: "FOR\\s+SHARE"
        applicable_db: ["PG", "MY"]
        conversion_grade: P

      - id: lock_for_key_share
        name: "FOR KEY SHARE"
        weight: 10
        detection_method: regex
        pattern: "FOR\\s+KEY\\s+SHARE"
        applicable_db: ["PG"]
        conversion_grade: P

    # 20.2 SQL Server 락 힌트
    sqlserver_lock_hints:
      - id: lock_nolock
        name: "WITH (NOLOCK)"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s*\\(\\s*NOLOCK\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: lock_rowlock
        name: "WITH (ROWLOCK)"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s*\\(\\s*ROWLOCK\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: lock_tablock
        name: "WITH (TABLOCK)"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s*\\(\\s*TABLOCK\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: lock_updlock
        name: "WITH (UPDLOCK)"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s*\\(\\s*UPDLOCK\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P

      - id: lock_holdlock
        name: "WITH (HOLDLOCK)"
        weight: 10
        detection_method: regex
        pattern: "WITH\\s*\\(\\s*HOLDLOCK\\s*\\)"
        applicable_db: ["SS"]
        conversion_grade: P

    # 20.3 테이블 락
    table_lock:
      - id: lock_table
        name: "LOCK TABLE"
        weight: 15
        detection_method: regex
        pattern: "LOCK\\s+TABLE"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: lock_table_mode
        name: "LOCK TABLE ... IN ... MODE"
        weight: 15
        detection_method: regex
        pattern: "LOCK\\s+TABLE.*IN\\s+(SHARE|EXCLUSIVE)"
        applicable_db: ["ORA", "PG"]
        conversion_grade: P

    # 20.4 트랜잭션 제어
    transaction_control:
      - id: tx_begin
        name: "BEGIN TRANSACTION"
        weight: 5
        detection_method: regex
        pattern: "BEGIN(\\s+TRAN(SACTION)?|\\s+WORK)?"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: tx_commit
        name: "COMMIT"
        weight: 5
        detection_method: keyword
        pattern: "COMMIT"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: tx_rollback
        name: "ROLLBACK"
        weight: 5
        detection_method: keyword
        pattern: "ROLLBACK"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: tx_savepoint
        name: "SAVEPOINT"
        weight: 10
        detection_method: regex
        pattern: "SAVEPOINT\\s+\\w+"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: tx_rollback_to
        name: "ROLLBACK TO SAVEPOINT"
        weight: 10
        detection_method: regex
        pattern: "ROLLBACK\\s+(TO\\s+)?(SAVEPOINT\\s+)?\\w+"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: tx_isolation
        name: "SET TRANSACTION ISOLATION LEVEL"
        weight: 10
        detection_method: regex
        pattern: "SET\\s+TRANSACTION\\s+ISOLATION\\s+LEVEL"
        applicable_db: ["ALL"]
        conversion_grade: P


  # ============================================================
  # # 21. 문자열/인코딩 (그룹: string_concat_operators)
  # ============================================================

  string_encoding:
    # 21.1 문자열 연결 연산자
    string_concat_operators:
      - id: str_concat_pipe
        name: "|| 연산자 (문자열 연결)"
        weight: 10
        detection_method: regex
        pattern: "'[^']*'\\s*\\|\\|\\s*'[^']*'"
        applicable_db: ["ORA", "PG", "ALT", "DB2"]
        conversion_grade: P
        group: string_concat_operators

      - id: str_concat_plus
        name: "+ 연산자 (문자열 연결)"
        weight: 10
        detection_method: regex
        pattern: "'[^']*'\\s*\\+\\s*'[^']*'"
        applicable_db: ["SS"]
        conversion_grade: P
        group: string_concat_operators

      - id: str_concat_func_all
        name: "CONCAT() 함수"
        weight: 5
        detection_method: regex
        pattern: "CONCAT\\s*\\("
        applicable_db: ["ALL"]
        conversion_grade: A
        group: string_concat_operators

    # 21.2 Collation/인코딩
    collation:
      - id: str_collate
        name: "COLLATE 절"
        weight: 10
        detection_method: regex
        pattern: "COLLATE\\s+\\w+"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: str_binary_mysql
        name: "BINARY (대소문자 구분)"
        weight: 10
        detection_method: regex
        pattern: "BINARY\\s+\\w+"
        applicable_db: ["MY", "MDB"]
        conversion_grade: P

      - id: str_collate_cs
        name: "대소문자 구분 Collation"
        weight: 10
        detection_method: regex
        pattern: "COLLATE\\s+\\w+_CS"
        applicable_db: ["SS"]
        conversion_grade: P

    # 21.3 패턴 매칭
    pattern_matching:
      - id: str_like
        name: "LIKE"
        weight: 5
        detection_method: regex
        pattern: "LIKE\\s+'[^']*[%_][^']*'"
        applicable_db: ["ALL"]
        conversion_grade: A

      - id: str_escape
        name: "ESCAPE 절"
        weight: 5
        detection_method: regex
        pattern: "ESCAPE\\s+'.'"
        applicable_db: ["ALL"]
        conversion_grade: P

      - id: str_similar_to
        name: "SIMILAR TO"
        weight: 10
        detection_method: regex
        pattern: "SIMILAR\\s+TO"
        applicable_db: ["PG"]
        conversion_grade: P

      - id: str_glob
        name: "GLOB"
        weight: 10
        detection_method: keyword
        pattern: "GLOB"
        applicable_db: ["SQLite"]
        conversion_grade: P


  # ============================================================
  # # 22. 에러 처리
  # ============================================================

  error_handling:
    handlers:
      - id: err_try_catch
        name: "TRY...CATCH"
        weight: 15
        detection_method: regex
        pattern: "BEGIN\\s+TRY"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: err_exception_when
        name: "EXCEPTION WHEN"
        weight: 15
        detection_method: regex
        pattern: "EXCEPTION\\s+WHEN"
        applicable_db: ["ORA", "PG"]
        conversion_grade: M

      - id: err_declare_handler
        name: "DECLARE HANDLER"
        weight: 15
        detection_method: regex
        pattern: "DECLARE\\s+(CONTINUE|EXIT)\\s+HANDLER"
        applicable_db: ["MY", "MDB"]
        conversion_grade: M

      - id: err_raise_pg
        name: "RAISE (PostgreSQL)"
        weight: 15
        detection_method: regex
        pattern: "RAISE\\s+(NOTICE|WARNING|EXCEPTION)"
        applicable_db: ["PG"]
        conversion_grade: M

      - id: err_raise_app_error
        name: "RAISE_APPLICATION_ERROR"
        weight: 15
        detection_method: regex
        pattern: "RAISE_APPLICATION_ERROR\\s*\\("
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: err_raiserror
        name: "RAISERROR"
        weight: 15
        detection_method: regex
        pattern: "RAISERROR\\s*\\("
        applicable_db: ["SS"]
        conversion_grade: M

      - id: err_throw
        name: "THROW"
        weight: 15
        detection_method: keyword
        pattern: "THROW"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: err_signal
        name: "SIGNAL SQLSTATE"
        weight: 15
        detection_method: regex
        pattern: "SIGNAL\\s+SQLSTATE"
        applicable_db: ["MY", "MDB"]
        conversion_grade: M


  # ============================================================
  # # 23. 동적 SQL
  # ============================================================

  dynamic_sql:
    statements:
      - id: dyn_execute_immediate
        name: "EXECUTE IMMEDIATE"
        weight: 15
        detection_method: regex
        pattern: "EXECUTE\\s+IMMEDIATE"
        applicable_db: ["ORA", "PG"]
        conversion_grade: M

      - id: dyn_prepare
        name: "PREPARE"
        weight: 15
        detection_method: regex
        pattern: "PREPARE\\s+\\w+\\s+FROM"
        applicable_db: ["MY", "MDB"]
        conversion_grade: M

      - id: dyn_execute_mysql
        name: "EXECUTE (MySQL)"
        weight: 15
        detection_method: regex
        pattern: "EXECUTE\\s+\\w+(\\s+USING)?"
        applicable_db: ["MY", "MDB"]
        conversion_grade: M

      - id: dyn_sp_executesql
        name: "sp_executesql"
        weight: 15
        detection_method: regex
        pattern: "sp_executesql\\s+"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: dyn_exec_string
        name: "EXEC() / EXECUTE()"
        weight: 15
        detection_method: regex
        pattern: "EXEC(UTE)?\\s*\\(\\s*'"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: dyn_dbms_sql
        name: "DBMS_SQL"
        weight: 20
        detection_method: regex
        pattern: "DBMS_SQL\\.\\w+"
        applicable_db: ["ORA"]
        conversion_grade: M


  # ============================================================
  # # 24. 커서
  # ============================================================

  cursor:
    cursor_operations:
      - id: cur_declare
        name: "DECLARE CURSOR"
        weight: 15
        detection_method: regex
        pattern: "DECLARE\\s+\\w+\\s+CURSOR"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: cur_cursor_is
        name: "CURSOR ... IS SELECT"
        weight: 15
        detection_method: regex
        pattern: "CURSOR\\s+\\w+\\s+IS\\s+SELECT"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: cur_cursor_for
        name: "CURSOR FOR"
        weight: 15
        detection_method: regex
        pattern: "\\w+\\s+CURSOR\\s+FOR"
        applicable_db: ["PG"]
        conversion_grade: M

      - id: cur_open
        name: "OPEN CURSOR"
        weight: 10
        detection_method: regex
        pattern: "OPEN\\s+\\w+"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: cur_fetch
        name: "FETCH CURSOR"
        weight: 15
        detection_method: regex
        pattern: "FETCH\\s+(NEXT\\s+)?FROM\\s+\\w+"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: cur_fetch_into
        name: "FETCH INTO"
        weight: 15
        detection_method: regex
        pattern: "FETCH\\s+\\w+\\s+INTO"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: cur_close
        name: "CLOSE CURSOR"
        weight: 10
        detection_method: regex
        pattern: "CLOSE\\s+\\w+"
        applicable_db: ["ALL"]
        conversion_grade: M

      - id: cur_deallocate
        name: "DEALLOCATE CURSOR"
        weight: 10
        detection_method: regex
        pattern: "DEALLOCATE\\s+\\w+"
        applicable_db: ["SS"]
        conversion_grade: M

      - id: cur_for_loop
        name: "FOR ... IN CURSOR LOOP"
        weight: 15
        detection_method: regex
        pattern: "FOR\\s+\\w+\\s+IN\\s+\\w+\\s+LOOP"
        applicable_db: ["ORA", "PG"]
        conversion_grade: M

      - id: cur_ref_cursor
        name: "REF CURSOR"
        weight: 20
        detection_method: regex
        pattern: "REF\\s+CURSOR"
        applicable_db: ["ORA"]
        conversion_grade: M

      - id: cur_sys_refcursor
        name: "SYS_REFCURSOR"
        weight: 20
        detection_method: keyword
        pattern: "SYS_REFCURSOR"
        applicable_db: ["ORA"]
        conversion_grade: M


# ============================================================
# 동등 기능 그룹 (Equivalent Groups)
# ============================================================
# 같은 기능을 수행하지만 DBMS마다 다른 문법을 사용하는 항목들의 변환 매트릭스

equivalent_groups:
  # UPSERT 구문
  upsert_syntax:
    description: "INSERT 시 중복 키 처리"
    members:
      - id: dml_merge_into_oracle
        db: ORA
      - id: dml_merge_sqlserver
        db: SS
      - id: dml_on_duplicate
        db: [MY, MDB]
      - id: dml_on_conflict
        db: PG
      - id: dml_upsert_altibase
        db: ALT
    conversion_matrix:
      ORA_to_PG: "INSERT ON CONFLICT 또는 CTE"
      ORA_to_MY: "INSERT ON DUPLICATE KEY UPDATE"
      MY_to_PG: "INSERT ON CONFLICT"
      MY_to_ORA: "MERGE INTO"
      SS_to_PG: "INSERT ON CONFLICT"

  # RETURNING 절
  returning_clause:
    description: "DML 결과 반환"
    members:
      - id: dml_returning_pg
        db: PG
      - id: dml_returning_oracle
        db: ORA
      - id: dml_output_sqlserver
        db: SS
    conversion_matrix:
      ORA_to_PG: "RETURNING"
      ORA_to_SS: "OUTPUT"
      PG_to_ORA: "RETURNING INTO"
      SS_to_PG: "RETURNING"

  # 시퀀스
  sequence_syntax:
    description: "시퀀스 값 조회"
    members:
      - id: ddl_nextval_oracle
        db: ORA
      - id: ddl_nextval_pg
        db: PG
      - id: ddl_next_value_ss
        db: SS
    conversion_matrix:
      ORA_to_PG: "nextval('seq')"
      ORA_to_MY: "시퀀스 테이블 또는 AUTO_INCREMENT"
      PG_to_ORA: "seq.NEXTVAL"

  # 페이징
  pagination_syntax:
    description: "결과 행 제한"
    members:
      - id: page_limit_offset
        db: [MY, MDB, PG]
      - id: page_offset_fetch
        db: [SS, ORA]
      - id: page_rownum
        db: ORA
      - id: page_top_n
        db: SS
    conversion_matrix:
      ORA_ROWNUM_to_PG: "ROW_NUMBER() OVER() 또는 LIMIT"
      ORA_ROWNUM_to_MY: "LIMIT"
      SS_TOP_to_PG: "LIMIT"
      SS_TOP_to_ORA: "FETCH FIRST (12c+) 또는 ROWNUM"
      MY_LIMIT_to_ORA: "FETCH FIRST (12c+) 또는 ROWNUM"

  # NULL 대체 함수
  null_replace_func:
    description: "NULL 값 대체"
    members:
      - id: null_nvl
        db: [ORA, ALT]
      - id: null_ifnull
        db: [MY, MDB]
      - id: null_isnull
        db: SS
      - id: null_coalesce
        db: ALL
    conversion_matrix:
      ORA_to_MY: "IFNULL 또는 COALESCE"
      ORA_to_SS: "ISNULL 또는 COALESCE"
      ORA_to_PG: "COALESCE"
      MY_to_ORA: "NVL"
      SS_to_ORA: "NVL"
      recommended: "COALESCE (ANSI 표준)"

  # 현재 날짜/시간
  current_datetime_func:
    description: "현재 날짜/시간 조회"
    members:
      - id: dt_now
        db: [MY, MDB, PG]
      - id: dt_sysdate
        db: ORA
      - id: dt_getdate
        db: SS
      - id: dt_current_timestamp
        db: ALL
    conversion_matrix:
      ORA_to_MY: "NOW()"
      ORA_to_PG: "CURRENT_TIMESTAMP 또는 NOW()"
      ORA_to_SS: "GETDATE()"
      SS_to_ORA: "SYSDATE"
      MY_to_ORA: "SYSDATE"

  # 문자열 위치 찾기
  string_position_func:
    description: "문자열 내 위치 찾기"
    members:
      - id: str_instr
        db: [ORA, MY, MDB]
      - id: str_charindex
        db: SS
      - id: str_position
        db: PG
      - id: str_locate
        db: [MY, MDB]
    conversion_matrix:
      ORA_to_SS: "CHARINDEX (인자 순서 다름)"
      ORA_to_PG: "POSITION 또는 strpos()"
      SS_to_ORA: "INSTR"

  # 문자열 집계
  string_aggregation_func:
    description: "문자열 집계"
    members:
      - id: agg_group_concat
        db: [MY, MDB]
      - id: agg_listagg
        db: ORA
      - id: agg_string_agg
        db: [PG, SS]
    conversion_matrix:
      ORA_to_MY: "GROUP_CONCAT"
      ORA_to_PG: "STRING_AGG"
      MY_to_ORA: "LISTAGG"
      MY_to_PG: "STRING_AGG"

  # 집합 연산 (EXCEPT/MINUS)
  set_except_minus:
    description: "차집합 연산"
    members:
      - id: set_except
        db: [PG, SS, MY]
      - id: set_minus
        db: [ORA, ALT]
    conversion_matrix:
      ORA_to_PG: "EXCEPT"
      ORA_to_SS: "EXCEPT"
      PG_to_ORA: "MINUS"
      SS_to_ORA: "MINUS"

  # 문자열 연결
  string_concat_operators:
    description: "문자열 연결"
    members:
      - id: str_concat_pipe
        db: [ORA, PG, ALT, DB2]
      - id: str_concat_plus
        db: SS
      - id: str_concat_func_all
        db: ALL
    conversion_matrix:
      ORA_to_MY: "CONCAT(a, b)"
      ORA_to_SS: "a + b"
      SS_to_ORA: "a || b"
      SS_to_MY: "CONCAT(a, b)"
      recommended: "CONCAT() 함수 사용 (대부분 DBMS 지원)"

  # 자동 증가
  auto_increment_types:
    description: "자동 증가 컬럼"
    members:
      - id: type_serial
        db: PG
      - id: type_auto_increment
        db: [MY, MDB]
      - id: type_identity_ss
        db: SS
      - id: type_identity_ora
        db: [ORA, PG]
    conversion_matrix:
      PG_to_MY: "INT AUTO_INCREMENT"
      PG_to_ORA: "NUMBER + SEQUENCE + TRIGGER 또는 IDENTITY (12c+)"
      MY_to_PG: "SERIAL"
      MY_to_ORA: "SEQUENCE + TRIGGER 또는 IDENTITY"

  # LATERAL/APPLY
  lateral_apply:
    description: "상관 서브쿼리 조인"
    members:
      - id: join_lateral
        db: [PG, MY, ORA]
      - id: join_cross_apply
        db: SS
      - id: join_outer_apply
        db: SS
    conversion_matrix:
      SS_CROSS_APPLY_to_PG: "LATERAL"
      SS_OUTER_APPLY_to_PG: "LEFT JOIN LATERAL"
      PG_to_SS: "CROSS APPLY / OUTER APPLY"
